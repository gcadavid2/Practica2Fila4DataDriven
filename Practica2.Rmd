---
title: "Practica2"
output: html_document
date: "2025-01-13"
---

```{r setup, include=FALSE}
require(httr)
require(xml2)
require(rvest)
require(tidytable)
require(dplyr)
require(purrr)
```


```{r}
FULL_URL_CONST <- "https://www.mediawiki.org/wiki/MediaWiki"
BASE_URL_CONST <- "https://www.mediawiki.org"

html <- read_html(BASE_URL_CONST)
title <- html %>% html_elements("title") %>% html_text2()
print(title)
```

```{r}
parse_href <- function(href) {
  if(startsWith(href,"#")){
    return(gsub("^#", FULL_URL_CONST,href))
  } else if(gsub("^/", BASE_URL_CONST, href))
  }else{
    return(href)
  }
}

parse_href_v <- Vectorize(parse_href)

links <- data.frame(
  href = html %>% html_elements("a") %>% html_attr("href"),
  text = html %>% html_elements("a") %>% html_text()
)

# Cleanup data
links %>% na.omit()
links <- links %>% mutate(href2 = parse_href_v(href))

show(links)
```